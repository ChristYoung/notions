# github action å¦‚ä½•é…ç½®secret.ACCESS_TOKEN
# https://blog.csdn.net/ht370671963/article/details/111995883
name: ğŸ¥· build and deploy notions

on:
  push:
    branches:
      - "main"

jobs:
  npm-build:
    name: ğŸ’… npm build process
    runs-on: ubuntu-latest
    steps:
      # actions/checkout@v4è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ£€å‡ºä»“åº“ä»£ç åˆ°è¿è¡Œå™¨çš„åŠ¨ä½œï¼Œå®ƒå…è®¸ä½ è¿è¡Œè„šæœ¬æˆ–è€…å…¶ä»–åŠ¨ä½œä¾µå…¥ä½ çš„ä»£ç ï¼ˆæ¯”å¦‚æ„å»ºæˆ–è€…æµ‹è¯•å·¥å…·ï¼‰
      - name: ğŸ§â€â™‚ï¸ Load the content of the repository
        uses: actions/checkout@v4
      # å®‰è£…nodejsç¯å¢ƒ, actions/setup-node@v3åŠ¨ä½œå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Nodejs, è¿™ä¼šåœ¨ä½ çš„ PATH åŠ ä¸Š node å’Œ npm å‘½ä»¤
      - name: ğŸ“¦ install nodejs
        uses: actions/setup-node@v3
        with:
          node-version: "16.x"
      - name: ğŸªœ install the dependencies
        run: npm install
      - name: ğŸ›  build the project
        run: npm run build

      # deploy
      # ä½¿ç”¨actionå¸‚åœºå·²æœ‰çš„action deploy-github-pages-action
      # https://github.com/marketplace/actions/deploy-github-pages
      - name: ğŸš€ deploy this project
        uses: ptienchuan/deploy-github-pages-action@master
        env:
          GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}
        with:
          source-directory: "docs/.vuepress/dist"
          target-branch: "gh-pages"
          user-name: "ChristYoung"
          user-email: "858851768@qq.com"
